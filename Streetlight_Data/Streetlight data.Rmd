---
title: "Untitled"
author: "Yuqi_Zhang"
date: "2/12/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(dplyr)
```

```{r}
streetlight_data_raw4 = read.csv("/Users/zhangyuqi/Documents/NCSA/Exposure_Risk_Analysis_in Rural_Illinois/Streetlight_Data/179765_Illinois_COVID_19_Phase_4_v2_od_all.csv")
streetlight_data_raw4
```

```{r}
streetlight_data4 = streetlight_data_raw4 %>% 
  filter(Day.Part == '0: All Day (12am-12am)',
         Day.Type == '0: All Days (M-Su)') %>% 
  rename(county_name = Origin.Zone.Name) %>%
  select(Origin.Zone.ID, Destination.Zone.ID,
         Average.Daily.O.D.Traffic..StL.Volume.) %>%
  arrange(desc(Average.Daily.O.D.Traffic..StL.Volume.)) %>% 
  rename(Origin.ID = Origin.Zone.ID,
         Destination.ID = Destination.Zone.ID,
         Traffic.V = Average.Daily.O.D.Traffic..StL.Volume. )
streetlight_data4
```

```{r}
write.csv(streetlight_data4, "streetlight_trips_p4.csv")
```

### repeat the process to other three periods of dataset
```{r}
streetlight_data_raw3 = read.csv("/Users/zhangyuqi/Documents/NCSA/Exposure_Risk_Analysis_in Rural_Illinois/Streetlight_Data/179763_Illinois_COVID_19_Phase_3_v2_od_all.csv")

streetlight_data3 = streetlight_data_raw3 %>% 
  filter(Day.Part == '0: All Day (12am-12am)',
         Day.Type == '0: All Days (M-Su)') %>% 
  rename(county_name = Origin.Zone.Name) %>%
  select(Origin.Zone.ID, Destination.Zone.ID,
         Average.Daily.O.D.Traffic..StL.Volume.) %>%
  arrange(desc(Average.Daily.O.D.Traffic..StL.Volume.)) %>% 
  rename(Origin.ID = Origin.Zone.ID,
         Destination.ID = Destination.Zone.ID,
         Traffic.V = Average.Daily.O.D.Traffic..StL.Volume. )
write.csv(streetlight_data3, "streetlight_trips_p3.csv")
```

```{r}
streetlight_data_raw2 = read.csv("/Users/zhangyuqi/Documents/NCSA/Exposure_Risk_Analysis_in Rural_Illinois/Streetlight_Data/179761_Illinois_COVID_19_Phase_2_v2_od_all.csv")

streetlight_data2 = streetlight_data_raw2 %>% 
  filter(Day.Part == '0: All Day (12am-12am)',
         Day.Type == '0: All Days (M-Su)') %>% 
  rename(county_name = Origin.Zone.Name) %>%
  select(Origin.Zone.ID, Destination.Zone.ID,
         Average.Daily.O.D.Traffic..StL.Volume.) %>%
  arrange(desc(Average.Daily.O.D.Traffic..StL.Volume.)) %>% 
  rename(Origin.ID = Origin.Zone.ID,
         Destination.ID = Destination.Zone.ID,
         Traffic.V = Average.Daily.O.D.Traffic..StL.Volume. )
write.csv(streetlight_data2, "streetlight_trips_p2.csv")
```

```{r}
streetlight_data_raw1 = read.csv("/Users/zhangyuqi/Documents/NCSA/Exposure_Risk_Analysis_in Rural_Illinois/Streetlight_Data/179761_Illinois_COVID_19_Phase_2_v2_od_all.csv")

streetlight_data1 = streetlight_data_raw1 %>% 
  filter(Day.Part == '0: All Day (12am-12am)',
         Day.Type == '0: All Days (M-Su)') %>% 
  rename(county_name = Origin.Zone.Name) %>%
  select(Origin.Zone.ID, Destination.Zone.ID,
         Average.Daily.O.D.Traffic..StL.Volume.) %>%
  arrange(desc(Average.Daily.O.D.Traffic..StL.Volume.)) %>% 
  rename(Origin.ID = Origin.Zone.ID,
         Destination.ID = Destination.Zone.ID,
         Traffic.V = Average.Daily.O.D.Traffic..StL.Volume. )
write.csv(streetlight_data1, "streetlight_trips_p1.csv")
```

```{r}
risk_flow_matrix4 = read.csv("/Users/zhangyuqi/Documents/NCSA/Exposure_Risk_Analysis_in Rural_Illinois/risk_flow_matrix4.csv")
risk_flow_matrix4
```

for county 01: calc the total origin trips $n$
   for county first 01 in the double dictinoary: $/n$
       for each county second in the double dictinoary: $* number of trips$
       
Data preprocesing (street light data):
1. use shape files and county & census tracts ID to figure out the geo relationship
2. start with one county (e.g. county 1), and see how to update the origin-dest matrix for the analysis)

Plots:
1. modification to the plots in data sections
2. make some plots about the Street light data if needed
rnorm(100,0,1)